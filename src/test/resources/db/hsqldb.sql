CREATE TABLE user (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	login VARCHAR(100) NOT NULL,
	password VARCHAR(64) NOT NULL,
	name VARCHAR(50),
	surname VARCHAR(50),
	email VARCHAR(50),
	inscription_date DATE,
	PRIMARY KEY (id),
	CONSTRAINT UC_User UNIQUE (login)
);

CREATE TABLE event (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	name VARCHAR(50) NOT NULL,
	description VARCHAR(150),
	date DATE NOT NULL,
	time TIME NOT NULL,
	category VARCHAR(25) NOT NULL,
	maxInscriptions INTEGER NOT NULL,
	location VARCHAR(50) NOT NULL,
	PRIMARY KEY (id)
);

CREATE TABLE user_event (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	id_user INTEGER NOT NULL,
	id_event INTEGER NOT NULL,
	moderator BOOLEAN,
	PRIMARY KEY (id)
);

ALTER TABLE user_event 
ADD FOREIGN KEY (id_user) 
REFERENCES user(id) 
ON DELETE CASCADE 
ON UPDATE CASCADE;

ALTER TABLE user_event 
ADD FOREIGN KEY (id_event) 
REFERENCES event(id) 
ON DELETE CASCADE 
ON UPDATE CASCADE;